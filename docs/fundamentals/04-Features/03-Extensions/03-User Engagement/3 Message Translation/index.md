---
sidebar_position: 3
title: Message Translation
slug: /message-translation
---
import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

The Message Translation extension helps you translate messages into multiple languages.

## Extension settings

1. Login to [CometChat](https://app.cometchat.com/login) and select your app.
2. Go to the Extensions section and enable the Message Translation extension.

## How does it work?

The messages translation extension allows the receivers of the message to translate it in the language of their choice.

In a group of multi-lingual people, a message sent by one of the participants can be in English. However, it can be translated by other members of the group to their languages.

We support translations in the following languages:

<table border='1' style={{ borderCollapse: 'collapse' }}>
  <thead>
    <tr>
      <th>Language</th>
      <th>Language code</th>
    </tr>
  </thead>
  <tbody><tr>
    <td>Afrikaans</td>
    <td>af</td>
    </tr>
    <tr>
      <td>Albanian</td>
      <td>sq</td>
    </tr>
    <tr>
      <td>Amharic</td>
      <td>am</td>
    </tr>
    <tr>
      <td>Arabic</td>
      <td>ar</td>
    </tr>
    <tr>
      <td>Armenian</td>
      <td>hy</td>
    </tr>
    <tr>
      <td>Azerbaijani</td>
      <td>az</td>
    </tr>
    <tr>
      <td>Bengali</td>
      <td>bn</td>
    </tr>
    <tr>
      <td>Bosnian</td>
      <td>bs</td>
    </tr>
    <tr>
      <td>Bulgarian</td>
      <td>bg</td>
    </tr>
    <tr>
      <td>Catalan</td>
      <td>ca</td>
    </tr>
    <tr>
      <td>Chinese (Simplified)</td>
      <td>zh</td>
    </tr>
    <tr>
      <td>Chinese (Traditional)</td>
      <td>zh-TW</td>
    </tr>
    <tr>
      <td>Croatian</td>
      <td>hr</td>
    </tr>
    <tr>
      <td>Czech</td>
      <td>cs</td>
    </tr>
    <tr>
      <td>Danish</td>
      <td>da</td>
    </tr>
    <tr>
      <td>Dari</td>
      <td>fa-AF</td>
    </tr>
    <tr>
      <td>Dutch</td>
      <td>nl</td>
    </tr>
    <tr>
      <td>English</td>
      <td>en</td>
    </tr>
    <tr>
      <td>Estonian</td>
      <td>et</td>
    </tr>
    <tr>
      <td>Farsi (Persian)</td>
      <td>fa</td>
    </tr>
    <tr>
      <td>Filipino, Tagalog</td>
      <td>tl</td>
    </tr>
    <tr>
      <td>Finnish</td>
      <td>fi</td>
    </tr>
    <tr>
      <td>French</td>
      <td>fr</td>
    </tr>
    <tr>
      <td>French (Canada)</td>
      <td>fr-CA</td>
    </tr>
    <tr>
      <td>Georgian</td>
      <td>ka</td>
    </tr>
    <tr>
      <td>German</td>
      <td>de</td>
    </tr>
    <tr>
      <td>Greek</td>
      <td>el</td>
    </tr>
    <tr>
      <td>Gujarati</td>
      <td>gu</td>
    </tr>
    <tr>
      <td>Haitian Creole</td>
      <td>ht</td>
    </tr>
    <tr>
      <td>Hausa</td>
      <td>ha</td>
    </tr>
    <tr>
      <td>Hebrew</td>
      <td>he</td>
    </tr>
    <tr>
      <td>Hindi</td>
      <td>hi</td>
    </tr>
    <tr>
      <td>Hungarian</td>
      <td>hu</td>
    </tr>
    <tr>
      <td>Icelandic</td>
      <td>is</td>
    </tr>
    <tr>
      <td>Indonesian</td>
      <td>id</td>
    </tr>
    <tr>
      <td>Irish</td>
      <td>ga</td>
    </tr>
    <tr>
      <td>Italian</td>
      <td>it</td>
    </tr>
    <tr>
      <td>Japanese</td>
      <td>ja</td>
    </tr>
    <tr>
      <td>Kannada</td>
      <td>kn</td>
    </tr>
    <tr>
      <td>Kazakh</td>
      <td>kk</td>
    </tr>
    <tr>
      <td>Korean</td>
      <td>ko</td>
    </tr>
    <tr>
      <td>Latvian</td>
      <td>lv</td>
    </tr>
    <tr>
      <td>Lithuanian</td>
      <td>lt</td>
    </tr>
    <tr>
      <td>Macedonian</td>
      <td>mk</td>
    </tr>
    <tr>
      <td>Malay</td>
      <td>ms</td>
    </tr>
    <tr>
      <td>Malayalam</td>
      <td>ml</td>
    </tr>
    <tr>
      <td>Maltese</td>
      <td>mt</td>
    </tr>
    <tr>
      <td>Marathi</td>
      <td>mr</td>
    </tr>
    <tr>
      <td>Mongolian</td>
      <td>mn</td>
    </tr>
    <tr>
      <td>Norwegian (Bokmål)</td>
      <td>no</td>
    </tr>
    <tr>
      <td>Pashto</td>
      <td>ps</td>
    </tr>
    <tr>
      <td>Polish</td>
      <td>pl</td>
    </tr>
    <tr>
      <td>Portuguese (Brazil)</td>
      <td>pt</td>
    </tr>
    <tr>
      <td>Portuguese (Portugal)</td>
      <td>pt-PT</td>
    </tr>
    <tr>
      <td>Punjabi</td>
      <td>pa</td>
    </tr>
    <tr>
      <td>Romanian</td>
      <td>ro</td>
    </tr>
    <tr>
      <td>Russian</td>
      <td>ru</td>
    </tr>
    <tr>
      <td>Serbian</td>
      <td>sr</td>
    </tr>
    <tr>
      <td>Sinhala</td>
      <td>si</td>
    </tr>
    <tr>
      <td>Slovak</td>
      <td>sk</td>
    </tr>
    <tr>
      <td>Slovenian</td>
      <td>sl</td>
    </tr>
    <tr>
      <td>Somali</td>
      <td>so</td>
    </tr>
    <tr>
      <td>Spanish</td>
      <td>es</td>
    </tr>
    <tr>
      <td>Spanish (Mexico)</td>
      <td>es-MX</td>
    </tr>
    <tr>
      <td>Swahili</td>
      <td>sw</td>
    </tr>
    <tr>
      <td>Swedish</td>
      <td>sv</td>
    </tr>
    <tr>
      <td>Tamil</td>
      <td>ta</td>
    </tr>
    <tr>
      <td>Telugu</td>
      <td>te</td>
    </tr>
    <tr>
      <td>Thai</td>
      <td>th</td>
    </tr>
    <tr>
      <td>Turkish</td>
      <td>tr</td>
    </tr>
    <tr>
      <td>Ukrainian</td>
      <td>uk</td>
    </tr>
    <tr>
      <td>Urdu</td>
      <td>ur</td>
    </tr>
    <tr>
      <td>Uzbek</td>
      <td>uz</td>
    </tr>
    <tr>
      <td>Vietnamese</td>
      <td>vi</td>
    </tr>
    <tr>
      <td>Welsh</td>
      <td>cy</td>
    </tr>
  </tbody>
</table>

The language is identified using identifiers from [RFC 5646](https://en.wikipedia.org/wiki/List_of_ISO_639-2_codes) — if there is a 2-letter ISO 639-1 identifier, with a regional subtag if necessary, it uses that. Otherwise, it uses the ISO 639-2 3-letter code.

## Implementation

The extension uses the `callExtension()` method provided by CometChat SDKs.

The messages will be translated according to the languages specified by the receiver. You can specify the languages for translation as an array. If you pass in an empty array, the language will default to English.

<Tabs>
<TabItem value="Javascript" label="Javascript">

```javascript
CometChat.callExtension('message-translation', 'POST', 'v2/translate', {
  "msgId": 12,
  "text": "Hey there! How are you?",
  "languages": [ "ru", "hi", "mr" ]
}).then( result => {
	// Result of translations
})
.catch(error => {
  // Some error occured
});
```
</TabItem>
<TabItem value="Java" label="Java">

```java
import org.json.simple.JSONObject;

JSONObject body=new JSONObject();
JSONArray languages = new JSONArray();

languages.add("ru");
languages.add("hi");

body.put("msgId", 12);
body.put("languages", languages);
body.put("text", "Hey there! How are you?");

CometChat.callExtension("message-translation", "POST", "/v2/translate", body,
 new CometChat.CallbackListener < JSONObject > () {
    @Override
    public void onSuccess(JSONObject jsonObject) {
        // Result of translations
    }
    @Override
    public void onError(CometChatException e) {
        // Some error occured
    }
});
```
</TabItem>
<TabItem value="Swift" label="Swift">

```swift
CometChat.callExtension(slug: "message-translation", type: .post, endPoint: "v2/translate", body: ["msgId": 12 ,"languages": ["hi", "ru"], "text": "Hey there! How are you?"] as [String : Any], onSuccess: { (response) in
         // Result of translations
      }) { (error) in
         // Some error occured
      }
```
</TabItem>
</Tabs>



The result will be received in the success callback of the `callExtension()` method. It will have the following JSON structure:

<Tabs>
<TabItem value="JSON" label="JSON">

```json
{
  "msgId": 12,
  "translations": [
    {
      "message_translated": "Эй там! Как ты?",
      "language_translated": "ru",
      "error": null,
      "error_description": null
    },
    {
      "message_translated": "अरे वहाँ! आप कैसे हैं?",
      "language_translated": "hi",
      "error": null,
      "error_description": null
    },
    {
      "message_translated": "",
      "language_translated": "mr",
      "error": "UnsupportedLanguagePairException",
      "error_description": "Unsupported language pair: en to mr. Target language 'mr' is not supported"
    }
  ],
    "language_original": "en"
}
```
</TabItem>
</Tabs>



If the source language is not supported for translation, then you will get the following error:

<Tabs>
<TabItem value="JSON" label="JSON">

```json
{
  "code": "ERR_NOT_SUPPORTED",
  "message": "Autodetected source language '<language_code>' is not supported"
}
```
</TabItem>
</Tabs>



### Translating at the sender's end

If the languages of the end-users/receivers are known before hand, this method of implementation can be used.

That is, before your trigger `CometChat.sendMessage`  method, make a call to the message translation extension as mentioned above. Since the message has not been sent yet, the `msgId` won't be available and can be skipped in that call.

Once you get the response, make an entry in your message's metadata as shown below:

<Tabs>
<TabItem value="Javascript" label="Javascript">

```javascript
const messageText = "Hey there! How are you?";

const metadata = {
  "message-translation": {
    "ru": "Эй там! Как ты?",
    "hi": "अरे वहाँ! आप कैसे हैं?"
  },
};

const textMessage = new CometChat.TextMessage(receiverID, messageText, receiverType);
textMessage.setMetadata(metadata);

CometChat.sendMessage(textMessage).then(
  message => {
    console.log("Message sent successfully:", message);
  }, error => {
    console.log("Message sending failed with error:", error);
  }
);
```
</TabItem>
<TabItem value="Java" label="Java">

```java
private String messageText = "Hey there! How are you?";

JSONObject metadata = new JSONObject();
JSONObject translations = new JSONObject();

try {
	translations.put("ru", "Эй там! Как ты?");
	translations.put("hi", "अरे वहाँ! आप कैसे हैं?");
	metadata.put("message-translation", translations);
} catch (JSONException je) {
  je.printStackTrace();
}

TextMessage textMessage = new TextMessage(receiverID, messageText, receiverType);
textMessage.setMetadata(metadata);

CometChat.sendMessage(textMessage, new CometChat.CallbackListener <TextMessage> () {
 @Override
 public void onSuccess(TextMessage textMessage) {
  Log.d(TAG, "Message sent successfully: " + textMessage.toString());
 }
 @Override
 public void onError(CometChatException e) {
  Log.d(TAG, "Message sending failed with exception: " + e.getMessage());
 }
});
```
</TabItem>
<TabItem value="Kotlin" label="Kotlin">

```kotlin
val messageText:String="Hey there! How are you?"

val metadataObject:JSONObject=JSONObject("{
  "message-translation": {
    "ru": "Эй там! Как ты?",
    "hi": "अरे वहाँ! आप कैसे हैं?"
  },
}")

val textMessage = TextMessage(receiverID, messageText, receiverType)
textMessage.metadata=metadataObject

CometChat.sendMessage(textMessage, object : CometChat.CallbackListener<TextMessage>() {
   override fun onSuccess(p0: TextMessage?) {
      Log.d(TAG, "Message sent successfully: " + p0?.toString())               
   }

   override fun onError(p0: CometChatException?) {
      Log.d(TAG, "Message sending failed with exception: " + p0?.message)          }

})
```
</TabItem>
<TabItem value="Swift" label="Swift">

```swift
let text = "Hey there! How are you?";

let translations = ["ru": "Эй там! Как ты?", "hi": "अरे वहाँ! आप कैसे हैं?"];
let metadata = ["message-translation": translations]

let textMessage = TextMessage(receiverUid: receiverID, text: text, receiverType: .user)
textMessage.metaData = metadata;

CometChat.sendTextMessage(message: textMessage, onSuccess: { (message) in

  print("TextMessage sent successfully. " + message.stringValue())

}) { (error) in

  print("TextMessage sending failed with error: " + error!.errorDescription);
}
```
</TabItem>
</Tabs>



Then, at the receiver's end, based on the device/browser language, you can show the translated text message in their chats from the metadata.

### Translating at the receiver's end

If the languages of the end-users/receivers are not known before hand, this method of implementation can be used.

Simply show a translate button above every message bubble in the UI. Make a call to the extension as mentioned above. The translation can then be shown in the same message bubble.

However, unlike the translations that are saved in the metadata when translating at the sender's end, these translations are ephemeral and will be lost once the page is reloaded, the user fetches older messages and scrolls back to the latest translated messages or the user switces conversations and comes back to the conversation with translated messages.